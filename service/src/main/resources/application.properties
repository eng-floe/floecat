# Copyright 2026 Yellowbrick Data, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

## application name
quarkus.application.name=floecat-service
## server
quarkus.grpc.server.use-separate-server=false
quarkus.http.http2=true
quarkus.grpc.server.plain-text=true
quarkus.grpc.server.enable-reflection-service=true
quarkus.http.host=${FLOECAT_HTTP_HOST:0.0.0.0}
quarkus.http.port=${FLOECAT_HTTP_PORT:9100}
## clients
quarkus.grpc.clients.floecat.host=${FLOECAT_GRPC_HOST:localhost}
quarkus.grpc.clients.floecat.port=${FLOECAT_GRPC_PORT:9100}
quarkus.grpc.clients.floecat.plain-text=true
## Floecat repository seeding
floecat.seed.enabled=${FLOECAT_SEED_ENABLED:true}
floecat.seed.mode=${FLOECAT_SEED_MODE:fake}
## Pointer store configuration
floecat.kv=${FLOECAT_KV:memory}
floecat.kv.table=${FLOECAT_KV_TABLE:floecat_pointers}
floecat.kv.auto-create=${FLOECAT_KV_AUTO_CREATE:true}
floecat.kv.ttl-enabled=${FLOECAT_KV_TTL_ENABLED:true}
## Blob store configuration
floecat.blob=${FLOECAT_BLOB:memory}
floecat.blob.s3.bucket=${FLOECAT_BLOB_S3_BUCKET:floecat-dev}
floecat.fileio.override.io-impl=${FLOECAT_FILEIO_IMPL:}
floecat.fileio.override.s3.endpoint=${FLOECAT_S3_ENDPOINT:}
floecat.fileio.override.s3.region=${FLOECAT_S3_REGION:us-east-1}
floecat.fileio.override.s3.access-key-id=${FLOECAT_S3_ACCESS_KEY_ID:}
floecat.fileio.override.s3.secret-access-key=${FLOECAT_S3_SECRET_ACCESS_KEY:}
floecat.fileio.override.s3.path-style-access=${FLOECAT_S3_PATH_STYLE:true}
floecat.fileio.override.aws.dynamodb.endpoint-override=${FLOECAT_DYNAMODB_ENDPOINT:}
## GC settings
floecat.idempotency.ttl-seconds=900
# Scheduler cadence
floecat.gc.idempotency.tick-every=60s
# Slice controls
floecat.gc.idempotency.page-size=500
floecat.gc.idempotency.batch-limit=2000
floecat.gc.idempotency.slice-millis=1500
# Account page size during fair iteration
floecat.gc.idempotency.accounts-page-size=50
# CAS blob GC
floecat.gc.cas.enabled=true
floecat.gc.cas.tick-every=10m
floecat.gc.cas.page-size=500
floecat.gc.cas.min-age-ms=30000
floecat.gc.cas.max-tick-millis=4000
floecat.gc.cas.accounts-page-size=50

floecat.gc.pointer.enabled=true
floecat.gc.pointer.tick-every=10m
floecat.gc.pointer.page-size=500
floecat.gc.pointer.min-age-ms=30000
floecat.gc.pointer.max-tick-millis=4000
floecat.gc.pointer.accounts-page-size=50
## logging
quarkus.log.console.json.enabled=true
quarkus.log.console.level=INFO
quarkus.log.category."ai.floedb.floecat".level=INFO
quarkus.log.category."software.amazon.awssdk".level=WARN
quarkus.banner.enabled=false
# ---------- General log  ----------
quarkus.log.file.enabled=true
quarkus.log.file.path=log/floecat-service.log
quarkus.log.file.level=INFO
quarkus.log.file.rotation.max-file-size=20M
quarkus.log.file.rotation.max-backup-index=14
quarkus.log.file.rotation.rotate-on-boot=true
quarkus.log.file.rotation.file-suffix=.yyyy-MM-dd
# ---------- Audit log ----------
quarkus.log.handler.file."audit".enabled=true
quarkus.log.handler.file."audit".path=log/audit.json
quarkus.log.handler.file."audit".level=INFO
quarkus.log.handler.file."audit".rotation.max-file-size=20M
quarkus.log.handler.file."audit".rotation.max-backup-index=14
quarkus.log.handler.file."audit".rotation.rotate-on-boot=true
quarkus.log.handler.file."audit".rotation.file-suffix=.yyyy-MM-dd
quarkus.log.category."ai.floedb.floecat.catalog.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.catalog.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.catalog.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.namespace.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.namespace.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.namespace.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.directory.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.directory.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.directory.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.table.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.table.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.table.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.view.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.view.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.view.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.account.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.account.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.account.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.query.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.query.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.query.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.connector.rpc".level=INFO
quarkus.log.category."ai.floedb.floecat.connector.rpc".handlers=audit
quarkus.log.category."ai.floedb.floecat.connector.rpc".use-parent-handlers=false
quarkus.log.category."ai.floedb.floecat.connector.iceberg.impl".level=DEBUG

## OpenTelemetry
quarkus.otel.enabled=true
quarkus.otel.traces.enabled=true
quarkus.otel.propagators=tracecontext
quarkus.otel.traces.exporter=none
# Metering
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
floecat.metrics.storage.refresh=30s
floecat.metrics.storage.default-avg-bytes=200
floecat.metrics.storage.sample-max=200
